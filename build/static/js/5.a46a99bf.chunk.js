(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[5],{213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a(36),u=a.n(o),l=a(47),i=a(5),m=a(204),s=a(206),p=a(210),d=a(48),f=a(72);function b(e){var t=e.children;return r.a.createElement(s.a,{as:"section",w:"85vw",p:10,h:"100%",position:"absolute",right:"0",boxSizing:"border-box",color:"gray.500"},t)}var E,h=a(12),g=a(32),v=a(183),O=a(205),x=a(185),y=a(75),j=a.n(y);E="https://tienda-dylan.herokuapp.com/product";var w=j.a.create({withCredentials:!0,baseURL:E}),C={CREATE:function(e){return w.post("/create",e)},UPDATE:function(e,t){return w.patch("/update/".concat(t),e)},GET_PRODUCTS:function(){return w.get("/all")},DELETE:function(e){return w.delete("/delete/".concat(e))},DETAIL:function(e){return w.get("detail/".concat(e))}},k=a(216),P=a(192);function D(e){var t=e.data,a=void 0===t?[]:t,c=e.deleteProduct,o=e.updateProduct,u=Object(n.useMemo)((function(){return a}),[a]);u.map((function(e){return e.update={id:e._id}}));var l=Object(n.useMemo)((function(){return[{Header:"Nombre",accessor:"title"},{Header:"Categor\xeda",accessor:"category"},{Header:"Precio",accessor:"price"},{Header:"Borrar",Cell:function(e){var t=e.value;return r.a.createElement(x.a,{cursor:"pointer",name:"delete",onClick:function(){return c(t)}})},accessor:"_id"},{Header:"Actualizar",Cell:function(e){var t=e.value;return r.a.createElement(x.a,{cursor:"pointer",name:"update",onClick:function(){return o(t.id)}})},accessor:"update"},{Header:"Imagen",Cell:function(e){return e.value.map((function(e){return r.a.createElement(k.a,{src:e.newPath.url})}))},accessor:"img"}]}),[c,o]),i=Object(P.useTable)({columns:l,data:u}),m=i.getTableProps,p=i.getTableBodyProps,d=i.headerGroups,f=i.rows,b=i.prepareRow;return r.a.createElement(s.a,{p:[10,10,10,20],boxShadow:"xl",w:"100%",boxSizing:"border-box",borderRadius:"8px",display:"flex",flexDirection:"column"},r.a.createElement(s.a,Object.assign({as:"table"},m),r.a.createElement(s.a,{as:"thead"},d.map((function(e){return r.a.createElement(s.a,Object.assign({as:"tr"},e.getHeaderGroupProps()),e.headers.map((function(e){return r.a.createElement(s.a,{as:"th",textAlign:"center",pl:2,pb:10,color:"tomato"},e.render("Header"))})))}))),r.a.createElement(s.a,Object.assign({as:"tbody"},p),f.map((function(e){return b(e),r.a.createElement(s.a,Object.assign({as:"tr"},e.getRowProps()),e.cells.map((function(e){return r.a.createElement(s.a,Object.assign({as:"td",textAlign:"center"},e.getCellProps(),{px:2,py:3}),e.render("Cell"))})))})))))}var T=a(43);function S(){var e=Object(c.useHistory)(),t=(Object(g.useToast)(),Object(n.useState)(null)),a=Object(i.a)(t,2),o=a[0],m=a[1];Object(n.useEffect)((function(){C.GET_PRODUCTS().then((function(e){var t=e.data;return m(Object(h.a)(t.products))})).catch((function(e){return console.log(e)}))}),[]);var d=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)((function(){return C.DELETE(t)}));case 2:m(o.filter((function(e){return e._id!==t})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(v.a,{direction:"column",align:"flex-start",h:"100%"},r.a.createElement(O.a,{as:"h2",size:"lg",color:"blue.700",mb:[3,3,5,10]},"Productos"),r.a.createElement(p.a,{mb:"30px"},"Estos son los productos registrados en tu tienda"),r.a.createElement(D,{data:o,deleteProduct:d,updateProduct:function(t){e.push("/app/productos/update/".concat(t))}}),r.a.createElement(s.a,{position:"fixed",right:"50px",bottom:"50px"},r.a.createElement(x.a,{onClick:function(){e.push("/app/productos/crear")},width:"60px",height:"60px",name:"add_item",cursor:"pointer"}))):r.a.createElement(T.a,null)}var H,A=a(211),R=a(207),U=a(212),L=a(215),z=a(2),I=a(34);function N(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],r=t[1];return[a,function(e){e.persist(),r((function(t){return Object(I.a)(Object(I.a)({},t),{},Object(z.a)({},e.target.name,e.target.value))}))}]}H="https://tienda-dylan.herokuapp.com";var G=j.a.create({withCredentials:!0,baseURL:H}),V={UPLOAD:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/upload",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=a(188),F=a.n(_);function M(e){var t=N(),a=Object(i.a)(t,2),o=a[0],m=a[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),E=b[0],g=b[1],x=Object(c.useHistory)(),y=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=new FormData,t.target.files)a.append("docs",t.target.files[n]);return e.next=4,Object(f.a)((function(){return V.UPLOAD(a)}));case 4:(r=e.sent).data.length>0?g([].concat(Object(h.a)(E),Object(h.a)(r.data))):g(E);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o.img=E,e.next=4,Object(f.a)((function(){return C.CREATE(o)}));case 4:e.sent.product?x.push("/app/productos"):F.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{display:"flex",alignItems:"center",justifyContent:"center",w:"100%",flexDirection:"column"},r.a.createElement(O.a,{as:"h2"},"Crear un producto"),r.a.createElement(v.a,{direction:"column",w:"50%"},r.a.createElement(A.a,{m:2},"Nombre"),r.a.createElement(R.a,{onChange:m,m:2,type:"text",name:"title"}),r.a.createElement(A.a,{m:2},"Descripci\xf3n"),r.a.createElement(R.a,{onChange:m,m:2,type:"text",name:"description"}),r.a.createElement(A.a,{m:2},"Precio"),r.a.createElement(R.a,{onChange:m,m:2,type:"number",name:"price"}),r.a.createElement(A.a,{m:2},"Descuento"),r.a.createElement(R.a,{onChange:m,m:2,type:"number",name:"discount"}),r.a.createElement(A.a,{m:2},"Categor\xeda"),r.a.createElement(U.a,{placeholder:"Selecciona una categoria",onChange:m,m:2,type:"text",name:"category"},[{value:"TV",key:1},{value:"PHONE",key:2},{value:"COMPUTER",key:3},{value:"HEADPHONE",key:4}].map((function(e){return r.a.createElement("option",{value:e.value,key:e.id},e.value)}))),r.a.createElement(A.a,{m:2},"Imagenes"),r.a.createElement(R.a,{m:2,type:"file",name:"docs",onChange:y,multiple:!0}),E&&E.map((function(e){return r.a.createElement(p.a,null,e.name)})),r.a.createElement(L.a,{onClick:j,color:"white",backgroundColor:"blue.500",m:2},"Crear"))))}function B(e){var t=N(),a=Object(i.a)(t,2),o=a[0],m=a[1],d=Object(n.useState)(null),b=Object(i.a)(d,2),E=b[0],g=b[1],x=Object(n.useState)([]),y=Object(i.a)(x,2),j=y[0],w=y[1],k=Object(c.useHistory)();Object(n.useEffect)((function(){C.DETAIL(e.match.params.id).then((function(e){var t=e.data.product;g(t),w(t.img)}))}),[e.match.params.id]);var P=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=new FormData,t.target.files)a.append("docs",t.target.files[n]);return e.next=4,Object(f.a)((function(){return V.UPLOAD(a)}));case 4:(r=e.sent).data.length>0?w([].concat(Object(h.a)(j),Object(h.a)(r.data))):w(j);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),o.img=j,console.log(o),t.next=5,Object(f.a)((function(){return C.UPDATE(o,e.match.params.id)}));case 5:t.sent.product?k.push("/app/productos"):F.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{display:"flex",alignItems:"center",justifyContent:"center",w:"100%",flexDirection:"column"},r.a.createElement(O.a,{as:"h2"},"Crear un producto"),r.a.createElement(v.a,{direction:"column",w:"50%"},r.a.createElement(A.a,{m:2},"Nombre"),r.a.createElement(R.a,{defaultValue:null===E||void 0===E?void 0:E.title,onChange:m,m:2,type:"text",name:"title"}),r.a.createElement(A.a,{m:2},"Descripci\xf3n"),r.a.createElement(R.a,{defaultValue:null===E||void 0===E?void 0:E.description,onChange:m,m:2,type:"text",name:"description"}),r.a.createElement(A.a,{m:2},"Precio"),r.a.createElement(R.a,{defaultValue:null===E||void 0===E?void 0:E.price,onChange:m,m:2,type:"number",name:"price"}),r.a.createElement(A.a,{m:2},"Descuento"),r.a.createElement(R.a,{defaultValue:null===E||void 0===E?void 0:E.discount,onChange:m,m:2,type:"number",name:"discount"}),r.a.createElement(A.a,{m:2},"Categor\xeda"),r.a.createElement(U.a,{placeholder:"Selecciona una categoria",onChange:m,m:2,type:"text",name:"category"},[{value:"TV",key:1},{value:"PHONE",key:2},{value:"COMPUTER",key:3},{value:"HEADPHONE",key:4}].map((function(e){return r.a.createElement("option",{selected:!(!E||E.category!==e.value),value:e.value,key:e.id},e.value)}))),r.a.createElement(A.a,{m:2},"Imagenes"),r.a.createElement(R.a,{m:2,type:"file",name:"docs",onChange:P,multiple:!0}),j&&j.map((function(e){return r.a.createElement(p.a,null,e.name)})),r.a.createElement(L.a,{onClick:D,color:"white",backgroundColor:"blue.500",m:2},"Crear"))))}var J=function(){var e=Object(d.b)(),t=Object(i.a)(e,1)[0].user;return r.a.createElement("div",null,r.a.createElement("h1",null,t.username))},W=[{path:"/app/home",label:"Inicio",type:"menu",Component:function(){return r.a.createElement(b,null,r.a.createElement(J,null))}},{path:"/app/productos",label:"Productos",type:"menu",Component:function(){return r.a.createElement(b,null,r.a.createElement(S,null))}},{path:"/app/productos/crear",label:"Crear Producto",type:"internal",Component:function(){return r.a.createElement(b,null,r.a.createElement(M,null))}},{path:"/app/productos/update/:id",label:"Actualizar Producto",type:"internal",Component:function(e){return r.a.createElement(b,null,r.a.createElement(B,e))}}],q=a(74);function K(){var e=Object(d.b)(),t=Object(i.a)(e,2)[1],a=Object(d.b)(),n=(Object(i.a)(a,1)[0].user,function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(q.a.LOGOUT);case 2:t({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement(s.a,{as:"nav",display:"flex",flexDirection:"column",boxSizing:"border-box",py:10,px:[5,5,10,20],h:"100vh",w:"15vw",position:"fixed",left:"0",textAlign:"left",boxShadow:"xl",backgroundColor:"blue.900"},r.a.createElement(s.a,{marginBottom:"50px"},r.a.createElement(p.a,{color:"white"},"Tiendita de Dylan")),W.map((function(e){var t=e.label,a=e.path;if("menu"===e.type)return r.a.createElement(s.a,{key:a,fontSize:["sm","md","lg","xl"],mt:[3,3,5,5],mb:[3,3,5,5]},r.a.createElement(m.NavLink,{activeStyle:{fontWeight:"bold"},style:{color:"white"},exact:!0,to:a},t))})),r.a.createElement(s.a,{position:"fixed",bottom:"0",padding:"2%"},r.a.createElement(s.a,{color:"white",cursor:"pointer",onClick:n,fontSize:["md","lg","lg","xl"],mb:[3,3,5,10]},"Cerrar Sesi\xf3n")))}t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null),r.a.createElement(c.Switch,null,W.map((function(e){var t=e.path,a=e.Component;return r.a.createElement(c.Route,{key:t,exact:!0,path:t,component:a})})),r.a.createElement(c.Redirect,{to:"/app/home"})))}}}]);
//# sourceMappingURL=5.a46a99bf.chunk.js.map